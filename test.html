<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Combined Features</title>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        var socket = io();
	      <!-- test -->
        function sendMessage() {
          var message = document.getElementById('message').value;
          socket.emit('chat message', message);
          document.getElementById('message').value = ''; // Clear the input after sending
        }

        document.getElementById('sendButton').onclick = sendMessage;

        socket.on('chat message', function(msg){
          var item = document.createElement('li');
          item.textContent = msg;
          document.getElementById('messages').appendChild(item);
          window.scrollTo(0, document.body.scrollHeight);
        });
      });
    </script>
</head>
<body>

<!-- Form for file upload and number of speakers -->
<form action="/user" enctype="multipart/form-data" method="post">
  <div class="form-group">
    <input type="file" class="form-control-file" name="uploaded_file">
    <input type="text" class="form-control" placeholder="Number of speakers" name="nspeakers">
    <input type="submit" value="Get me the stats!" class="btn btn-default">
  </div>
</form>

<!-- Real-time chat interface -->
<ul id="messages"></ul>
<input id="message" autocomplete="off" />
<button id="sendButton">Send</button>

</body>
</html>
